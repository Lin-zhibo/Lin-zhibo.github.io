// source/css/custom.styl

// ============================================================
// 1. 定义颜色变量
// (由于此文件独立编译，必须在此处明确定义颜色值)
// ============================================================
$neon-blue = #02d7f2   // 赛博朋克蓝 (常态)
$neon-green = #00ff41  // 赛博朋克绿 (悬浮)

// ============================================================
// 2. 正文区域 (.content) 链接样式
// ============================================================
// 逻辑：排除掉按钮(.button)和标签(.tag)，只针对正文里的普通文字链接
.content a:not(.button):not(.tag)
    color: $neon-blue               // 强制设定常态为蓝色
    transition: color 0.2s ease     // 添加0.2秒平滑过渡动画
    
    &:hover
        color: $neon-green !important // 鼠标悬浮时变为绿色

// ============================================================
// 3. 页脚区域 (.footer) 链接样式
// ============================================================
.footer a:not(.button)
    // 页脚链接常态保留原有颜色（通常是黑色或深色），仅在悬浮时变色
    transition: color 0.2s ease
    
    &:hover
        color: $neon-green !important // 鼠标悬浮时变为绿色

// ============================================================
// 4. Mermaid 流程图样式修复 (精细调整版)
// ============================================================

// 1. 容器样式：控制整体大小和位置
.mermaid
    background: transparent !important
    border: none !important
    margin: 2rem auto !important
    text-align: center !important
    
    // 【修复尺寸过大】
    // 不再强制 100%，而是限制最大宽度，让图片按需缩放
    width: auto !important 
    max-width: 35% !important  // 如果觉得还大，可以改成 600px
    display: flex !important
    justify-content: center !important

// 2. SVG 内部样式：修复文字截断和字体大小
.mermaid svg
    // 【修复文字截断】
    // Icarus 默认行高通常是 1.5 或 2，这会导致 Mermaid 计算的高度不够，文字掉出框外
    line-height: normal !important 
    
    // 【强制字体】
    // 强制使用标准字体，防止因自定义字体宽度不同导致的计算偏差
    font-family: "Arial", sans-serif !important 
    font-size: 16px !important
    
    // 确保 SVG 本身也是透明背景
    background-color: transparent !important
    
    // 允许 SVG 内部元素溢出（防止个别超长文字被切掉）
    overflow: visible !important

// 3. 针对节点内部的特定修复 (强制文字完整显示)
// Mermaid 使用 foreignObject 渲染 HTML 标签，必须允许其溢出
.mermaid g.node foreignObject,
.mermaid g.node div
    overflow: visible !important
    line-height: 1.2 !important // 稍微紧凑一点的行高，防止撑破盒子
    color: #fff !important      // 确保文字颜色（根据你的暗色主题）
