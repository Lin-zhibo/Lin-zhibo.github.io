// source/css/custom.styl

// ============================================================
// 1. 定义颜色变量
// (由于此文件独立编译，必须在此处明确定义颜色值)
// ============================================================
$neon-blue = #02d7f2   // 赛博朋克蓝 (常态)
$neon-green = #00ff41  // 赛博朋克绿 (悬浮)

// ============================================================
// 2. 正文区域 (.content) 链接样式
// ============================================================
// 逻辑：排除掉按钮(.button)和标签(.tag)，只针对正文里的普通文字链接
.content a:not(.button):not(.tag)
    color: $neon-blue               // 强制设定常态为蓝色
    transition: color 0.2s ease     // 添加0.2秒平滑过渡动画
    
    &:hover
        color: $neon-green !important // 鼠标悬浮时变为绿色

// ============================================================
// 3. 页脚区域 (.footer) 链接样式
// ============================================================
.footer a:not(.button)
    // 页脚链接常态保留原有颜色（通常是黑色或深色），仅在悬浮时变色
    transition: color 0.2s ease
    
    &:hover
        color: $neon-green !important // 鼠标悬浮时变为绿色

// ============================================================
// 4. Mermaid 流程图样式修复 (增强版)
// ============================================================

// 1. 外层容器修复
pre:has(code.language-mermaid)
    background-color: transparent !important
    border: none !important
    box-shadow: none !important
    padding: 0 !important
    margin: 2rem 0 !important
    // 关键修复：让容器允许内容溢出，防止切边
    overflow: visible !important 
    // 关键修复：重置行高，Icarus 的高行高会导致文字错位
    line-height: normal !important 

// 2. 内部 Code 标签修复
// Icarus 会强制给 code 标签加背景和字体设置，这里必须强制覆盖
pre code.language-mermaid
    background: transparent !important
    border: none !important
    color: inherit !important
    // 关键修复：强制重置字体大小，防止字号过大撑破 SVG
    font-size: 16px !important 
    font-family: sans-serif !important

// 3. SVG 图形本身修复
.mermaid
    background: transparent !important
    display: flex
    justify-content: center
    margin: 0 auto
    // 关键修复：允许 SVG 自动缩放宽度，但最大不超过屏幕
    width: 100% !important
    max-width: 100% !important
    height: auto !important

// 4. (可选) 针对 SVG 内部文字的强制修正
// 如果上面的不起作用，这段代码会强制修正 SVG 内部的文字样式
g.node foreignObject
    overflow: visible !important

